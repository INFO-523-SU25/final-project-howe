---
title: "Mexico Crime Relations"
subtitle: "INFO 523 - Summer 2025 - Final Project"
author: "Isabel Howe"
title-slide-attributes: 
  data-background-image: images/free-mexico-flag-powerpoint-background_300x300.avif
  data-background-size: stretch
  data-background-opacity: "0.7"
  data-slide-number:
format:
  revealjs:
    theme:  ['data/customtheming.scss']
  
editor: visual
jupyter: python3
execute:
  echo: false
---

```{python}
#| label: load-packages
#| include: false

# Load packages here
import pandas as pd
import seaborn as sns
import plotly.express as px
from IPython.display import Markdown

```

```{python}
#| label: setup
#| include: false
#| 
# Set up plot theme and figure resolution
sns.set_theme(style="whitegrid")
sns.set_context("notebook", font_scale=1.1)

import matplotlib.pyplot as plt
plt.rcParams['figure.dpi'] = 300
plt.rcParams['savefig.dpi'] = 300
plt.rcParams['figure.figsize'] = (6, 6 * 0.618)
```

```{python}
#| label: load-data
#| include: false
# Load data in Python
mtcars = sns.load_dataset('mpg').dropna()  # mtcars dataset is similar to the mpg dataset from seaborn
mtcars['speed'] = mtcars['horsepower'] / mtcars['weight']

penguins = sns.load_dataset('penguins').dropna()
```

# Intro

Regardless of the high crime rates, Mexico has been welcoming approximately 45 million visitors yearly, since 2019. The goal is to create an interactive visualizations and an interactive dashboard to better understanding crime patterns in Mexico.

The interactive visual will aid in understanding the dispersion of crime throughout Mexico,as well as help visualize whether cartel presence correlates with crime rates per state.

## Questions to Solve

1: Is the crime in Mexico evenly distributed throughout it's states?

2: Does the number of cartel organizations present in each state correlate to the magnitude of crimes in each state?

## Dataset

Two datasets were used for this project. The main dataset is *Mexican Crime Statistics: Comprehensive (2015-2023)* sourced from Mexico's official government website (<https://www.gob.mx/sre/en).>

-   The dataset is a compilation of criminal incidents reported across Mexico, form the years 2015-2023. For this project, the data was compiled to the years between 2020 and 2022.

-   Columns of interest include: 'Entity' (state), 'type_of_crime', and 'count'.

## Dataset continued..

The second dataset of interest is *BACRIM2020_Nodes* sourced from Mexico's official government branch Centro Geo.

-   This dataset was put together by piecing national and local newspapers together, along with Narco blogs.

-   I'm specifically interested in 'State' and 'Group' columns.

A third dataset was created by filtering and aggregating the first datasets. This new dataframe allowed the crime count, year, state name, and crime type to be listed in a manner that allowed for the creation of the interactive dashboard.

## Methodology

**Data Preparation:** Prepared the datasets to an appropriate format for the planned visualizations by cleaning, transforming, and aggregating both datasets.

**Library Selection:** Selected a python visualization library that best fit the datasets to create interactive visualizations. In this case, Plotly was utilized.

**Generated the Visualizations and Display:** Imported required libraries and cleaned/filtered datasets. Generated the visualizations that would best help answer the questions at hand.

**Results:** Assessed the visuals created for apparent patterns.

## Interactive Visual

```{python}
#| label: load-dataset
#| message: false
#| echo: false

mexi_crimes = pd.read_csv('data/mexico_crime_filtered.csv')

#creating column to represent number of crimes per state
crimes_per_state = mexi_crimes.groupby('entity')['count'].sum().reset_index()
# correct punctuation in state names
crimes_per_state['entity'] =crimes_per_state['entity'].replace({'Yucat?n': 'Yucatán', 'Quer?taro': 'Querétaro', 'Michoac?n de Ocampo': 'Michoacán', 'Nuevo Le?n': 'Nuevo León', 'San Luis Potos?': 'San Luis Potosí', 'Veracruz de Ignacio de la Llave' : 'Veracruz'}) 
# Removing Mexico and CDMX, they are not states
crimes_per_state = crimes_per_state[(crimes_per_state['entity'] != 'Ciudad de M?xico') &(crimes_per_state['entity'] != 'M?xico') & (crimes_per_state['entity'] != 'Aguascalientes')]
#rename entity to 'State' and count to 'Crime Count'
crimes_per_state.rename(columns={'entity': 'State','count': 'Crime Count'}, inplace = True)

fig = px.bar(crimes_per_state, x="Crime Count", y="State", orientation='h')  # create the horizontal bar graph
#adjust axis label font size
fig.update_layout(xaxis_title=dict(text='Crime Count', font=dict(size=28)), yaxis_title=dict(text='State', font=dict(size=28)))
fig.show()

```

## Cartel Presence and Crime Scatterplot

```{python}
cartels = pd.read_csv('data/BACRIM2020_Nodes.csv')

#creating a new dataframes that counts the amount of cartels present per state
cartel_pres = cartels['State'].value_counts().reset_index()
cartel_pres.columns = ['State', 'Cartel Count']

merged_df = pd.merge(cartel_pres, crimes_per_state, on='State', how='inner')

#merged_df = px.data.gapminder()
fig = px.scatter(merged_df, x="Cartel Count", y="Crime Count", color='State')
fig.update_traces(marker=dict(size=15)) # making markers larger
fig.update_layout(xaxis_title=dict(text='Cartel Count', font=dict(size=28)), yaxis_title=dict(text='Crime Count', font=dict(size=28)))
fig.show()


```

## Dashboard

```{python}
## Interactive Dashboard
print('An interactive dashboard to better visualize crime in Mexico per State')

Markdown("[Open Dashboard](http://localhost:8050)")


```

## Dashboard Code Part 1

![](images/Dash_code_1.png)

## Dashboard Code Part 2

![](images/Dash_code_2.png)

## Results

-   The horizontal bar graph which plots each state against its corresponding crime count displays a noticeable difference in crime count per state.

-   The interactive scatter-plot does not present any noticeable correlations worth studying further regarding a connection to crime count and number of cartel's known to be present in the state.

## Wrap up

The crime dispersion throughout Mexico does not appear to be evenly widespread. The states with the most crime experience a crime rate 30x higher than those with lower crime rates.

As for the lack of correlation between the number of cartels and the crime count, it's necessary to dive deeper into the data. Some variables to consider are the dominion of each cartel and the size of each state. The number of cartels may not be a strong indicator for cartel activity.

## References

Image credit: <https://templateready.com/products/free-flag-of-mexico-powerpoint-template-and-google-slides-theme?srsltid=AfmBOop83uRYakq1C03Te7mbqKt5WHWGXbX-trnJF1ihOFBDiz1bPv-C>

Tourism statistics: <https://roadgenius.com/statistics/tourism/mexico/>

Datasets:

-   **Mexican Crime Statistics:Comprehensive (2015-2023):** Sourced from [Gobierno de Mexico](https://www.gob.mx/sesnsp/acciones-y-programas/datos-abiertos-de-incidencia-delictiva)

-   **BACRIM2020_Nodes:** Sourced form CentroGeo, GeoInt and DataLab [https://ppdata.politicadedrogas.org](https://ppdata.politicadedrogas.org/)

## References continued..

Helpful websites to help create visualizations using Plotly:

-   <https://medium.com/plotly/how-to-create-a-beautiful-interactive-dashboard-layout-in-python-with-plotly-dash-a45c57bb2f3c>

-   <https://dash.plotly.com/minimal-app>

-   <https://www.analyticsvidhya.com/blog/2021/10/interactive-plots-in-python-with-plotly-a-complete-guide/>